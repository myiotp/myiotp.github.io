

<!Doctype html>
<html id="docs" class="Reference Documentation">



<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Device Telemetry Filter - Thingsboard</title>
<meta property="og:title" content="Device Telemetry Filter" />
<link rel="canonical" href="http://localhost:4000/docs/reference/filters/device-telemetry-filter/" />
<meta property="og:url" content="http://localhost:4000/docs/reference/filters/device-telemetry-filter/" />
<meta property="og:site_name" content="Thingsboard" />
<meta property="og:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "headline": "Device Telemetry Filter",
    "image": "http://localhost:4000/images/thingsboard_logo.png",
    "logo": "http://localhost:4000/images/thingsboard_logo.png",
    "url": "http://localhost:4000/docs/reference/filters/device-telemetry-filter/"
  }
</script>
<!-- End Jekyll SEO tag -->
	
	
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">

	<link rel="stylesheet" href="/css/styles.css">
	<script type="text/javascript">
		/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
		!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
		/*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
		function onloadCSS(a,b){function c(){!d&&b&&(d=!0,b.call(a))}var d;a.addEventListener&&a.addEventListener("load",c),a.attachEvent&&a.attachEvent("onload",c),"isApplicationInstalled"in navigator&&"onloadcssdefined"in a&&a.onloadcssdefined(c)}
	</script>
	<script type="text/javascript">

		function jqueryDefer(method) {
			if (window.jQuery) {
				method();
			} else {
				setTimeout(function() {
					jqueryDefer(method)
				}, 50);
			}
		}

		function jqueryUiDefer(method) {
			if (window.jQuery && window.jQuery.ui) {
				method();
			} else {
				setTimeout(function() {
					jqueryUiDefer(method)
				}, 50);
			}
		}

		function loadScript(src, callback)
		{
			var s, r, t;
			r = false;
			s = document.createElement('script');
			s.type = 'text/javascript';
			s.src = src;
			s.onload = s.onreadystatechange = function() {
				if ( !r && (!this.readyState || this.readyState == 'complete') )
				{
					r = true;
					if (callback) {
						callback();
					}
				}
			};
			t = document.getElementsByTagName('script')[0];
			t.parentNode.insertBefore(s, t);
		}

		function loadCssAsync(src, callback) {
			var stylesheet = loadCSS( src );
			if (callback) {
				onloadCSS(stylesheet, callback);
			}
		}

		function loadNextScript(index, scriptsList, completeCallback) {
			if (index < scriptsList.length) {
				var script = scriptsList[index];
				if (script.type === 'script') {
					loadScript(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				} else if (script.type === 'css') {
					loadCssAsync(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				}
			} else if (completeCallback) {
				completeCallback();
			}
		}

		var initialScriptsList = [
			{src: '/js/jquery-2.2.0.min.js', type: 'script'},
			{src: '/css/jquery-ui.min.css', type: 'css'},
			{src: '/js/jquery-ui.min.js', type: 'script'},
			{src: '/js/script.js', type: 'script'},
			{src: '/css/sweetalert.css', type: 'css'},
			{src: '/js/sweetalert.min.js', type: 'script'}
		];

		loadNextScript(0, initialScriptsList);

	</script>
	<script type="text/javascript">
		function _gaLt(event) {
			/* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
			if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
				return;
			}
			var el = event.srcElement || event.target;

			while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
				el = el.parentNode;
			}
			if (el && el.href) {
				var link = el.href;
				if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
					var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
					if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
						target = "_blank";
					}

					var hbrun = false; // tracker has not yet run
					var hitBack = function() {
						if (hbrun) return;
						hbrun = true;
						window.location.href = link;
					};

					if (target) {
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search
						);
					} else {
						event.preventDefault ? event.preventDefault() : event.returnValue = !1;
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search, {
									"hitCallback": hitBack
								}
						);

						setTimeout(hitBack, 1000);
					}
				}
			}
		}

		var _w = window;
		var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
		_w.addEventListener ? _w.addEventListener("load", function() {document.body.addEventListener(_gaLtEvt, _gaLt, !1)}, !1)
				: _w.attachEvent && _w.attachEvent("onload", function() {document.body.attachEvent("on" + _gaLtEvt, _gaLt)});
	</script>
</head>
<body>
<div id="cellophane" onclick="tb.toggleMenu()"></div>
<header>
	<a href="#" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="#" class="button" id="viewDocs" data-auto-burger-exclude>&nbsp;&nbsp;主要功能&nbsp;&nbsp;</a>
		<a href="#" class="button" id="useCases" data-auto-burger-exclude>&nbsp;&nbsp;查看文档&nbsp;&nbsp;</a>
		<a href="#" class="button" id="useCases" data-auto-burger-exclude>&nbsp;&nbsp;案例分析&nbsp;&nbsp;</a>
		<a href="#" class="button" id="gettingStarted" data-auto-burger-exclude>&nbsp;&nbsp;开始使用&nbsp;&nbsp;</a>
		<button id="hamburger" onclick="tb.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main id="headNav" data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="#">开始使用<a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">查看文档</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">案例分析</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="http://osswangxining.github.io/">Blog</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">服务支持</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">联系我们</a></h3>
			</div>
		</main>

	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Reference Documentation</h1>
  <h5>Design docs, concept definitions, and references for APIs and CLIs.</h5>
  <div id="vendorStrip" class="light-text">
    <div id="docsList">
        <ul>
          <li><a href="/docs/" >DOCS HOME</a></li>
          <li><a href="/docs/api/" >API</a></li>
          <li><a href="/docs/iot-gateway/" >IOT GATEWAY</a></li>
          <li><a href="/docs/reference/" class="YAH">REFERENCE</a></li>
          <li><a href="/docs/samples/" >SAMPLES</a></li>
          <li><a href="/iot-use-cases/" >USE CASES</a></li>
          <li><a href="/docs/iot-video-tutorials/" >VIDEO TUTORIALS</a></li>
          <li><a href="/docs/faq/" >FAQ</a></li>
          <li><a href="/docs/services/" >SERVICES</a></li>
          <li><a href="/docs/contact-us/" >CONTACT US</a></li>
        </ul>
    </div>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    </div>
  </div>
</section>





<section id="encyclopedia">
  
  <div id="docsToc" >
        <div class="pi-accordion">
        
    <a class="item" data-title="Reference Documentation" href="/docs/reference/"></a>
    <a class="item" data-title="Thingsboard Architecture" href="/docs/reference/architecture/"></a>
<div class="item" data-title="Thingsboard Performance">
  <div class="container">
    <a class="item" data-title="Data Collection Performance" href="/docs/reference/performance/"></a>
    <a class="item" data-title="Performance Test Tools" href="/docs/reference/performance-tools/"></a>
    <a class="item" data-title="How to repeate the tests" href="/docs/reference/performance-tests/"></a>
  </div>
</div>
<div class="item" data-title="Rule Engine components">
  <div class="container">
<div class="item" data-title="Filters">
  <div class="container">
    <a class="item" data-title="Message Type Filter" href="/docs/reference/filters/message-type-filter/"></a>
    <a class="item" data-title="Device Attributes Filter" href="/docs/reference/filters/device-attributes-filter/"></a>
    <a class="item" data-title="Device Telemetry Filter" href="/docs/reference/filters/device-telemetry-filter/"></a>
    <a class="item" data-title="Method Name Filter" href="/docs/reference/filters/method-name-filter/"></a>
  </div>
</div>
<div class="item" data-title="Processors">
  <div class="container">
    <a class="item" data-title="Alarm Deduplication Processor" href="/docs/reference/processors/alarm-deduplication-processor/"></a>
  </div>
</div>
<div class="item" data-title="Actions">
  <div class="container">
    <a class="item" data-title="Telemetry Plugin Action" href="/docs/reference/actions/telemetry-plugin-action/"></a>
    <a class="item" data-title="Send Mail Action" href="/docs/reference/actions/send-mail-action/"></a>
    <a class="item" data-title="Kafka Plugin Action" href="/docs/reference/actions/kafka-plugin-action/"></a>
    <a class="item" data-title="RabbitMQ Plugin Action" href="/docs/reference/actions/rabbitmq-plugin-action/"></a>
    <a class="item" data-title="REST API Call Plugin Action" href="/docs/reference/actions/rest-api-call-plugin-action/"></a>
    <a class="item" data-title="RPC Plugin Action" href="/docs/reference/actions/rpc-plugin-action/"></a>
  </div>
</div>
<div class="item" data-title="Plugins">
  <div class="container">
    <a class="item" data-title="Telemetry Plugin" href="/docs/reference/plugins/telemetry/"></a>
    <a class="item" data-title="RPC Plugin" href="/docs/reference/plugins/rpc/"></a>
    <a class="item" data-title="Device Messaging Plugin" href="/docs/reference/plugins/messaging/"></a>
    <a class="item" data-title="Mail Plugin" href="/docs/reference/plugins/mail/"></a>
    <a class="item" data-title="Kafka Plugin" href="/docs/reference/plugins/kafka/"></a>
    <a class="item" data-title="RabbitMQ Plugin" href="/docs/reference/plugins/rabbitmq/"></a>
    <a class="item" data-title="REST API Call Plugin" href="/docs/reference/plugins/rest/"></a>
    <a class="item" data-title="Time RPC Plugin" href="/docs/reference/plugins/time/"></a>
  </div>
</div>
  </div>
</div>
    <a class="item" data-title="Release Notes" href="https://github.com/thingsboard/thingsboard/releases/" target='_blank'></a>
        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="tb.toggleToc()"></button>
  </div> <!-- /docsToc -->
  
  <div id="docsContent" class="">
    <h1>Device Telemetry Filter</h1>
    <h2 id="overview">Overview</h2>

<p>This component allows to filter incoming <a href="/docs/user-guide/telemetry/">telemetry</a> messages by their values.
This filter is very useful if you want to apply rule based on certain values of telemetry. 
For example, engine controller may periodically report it’s temperature. 
When engine temperature is higher then 100 degrees you may rise an alert. 
Filter expression is written in javascript.</p>

<h2 id="configuration">Configuration</h2>

<p>You are able to write boolean javascript expression using bindings that match keys of your telemetry message.
If you are not sure that certain key is present in your message, you can add check it’s type for <em>undefined</em>.
For example, filter below will match if <em>temperature</em> is higher then <em>100</em> degrees.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">typeof</span> <span class="nx">temperature</span> <span class="o">!==</span> <span class="s1">'undefined'</span> <span class="o">&amp;&amp;</span> <span class="nx">temperature</span> <span class="o">&gt;</span> <span class="mi">100</span>
</code></pre>
</div>

<p>Assuming following telemetry message uploaded from engine controller device:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"temperature"</span><span class="p">:</span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="nt">"enabled"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"mode"</span><span class="p">:</span><span class="s2">"A"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Following filter will match if device is enabled, operating in mode ‘A’ and temperature is greater then 1000 degrees</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">temperature</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="o">&amp;&amp;</span> <span class="nx">enabled</span> <span class="o">==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="nx">mode</span> <span class="o">==</span> <span class="s1">'A'</span>
</code></pre>
</div>

<p>If you are not sure that all temelemtry data points are present in the message, you should use following syntax that adds all necessary “null” checks</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">typeof</span> <span class="nx">temperature</span><span class="o">!==</span> <span class="s1">'undefined'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">enabled</span> <span class="o">!==</span> <span class="s1">'undefined'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">mode</span> <span class="o">!==</span> <span class="s1">'undefined'</span> <span class="o">&amp;&amp;</span> 
<span class="nx">temperature</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="o">&amp;&amp;</span> <span class="nx">enabled</span> <span class="o">==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="nx">mode</span> <span class="o">==</span> <span class="s1">'A'</span>
</code></pre>
</div>

<h2 id="example">Example</h2>

<p>As a tenant administrator, you are able to review filter example inside <strong>Rules-&gt;Demo Alarm Rule-&gt;Filters-&gt;Device Telemetry Filter</strong>.</p>

  </div>
</section>

<footer>
	<main class="light-text">
		
		<div id="miceType" class="center">&copy; 2016 - 2017 IoT套件</div>
	</main>

</footer>



<button class="flyout-button" onclick="tb.toggleToc()"></button>


<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
</body>
</html>
