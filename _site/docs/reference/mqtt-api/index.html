

<!Doctype html>
<html id="docs" class="Thingsboard API reference">



<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- Begin Jekyll SEO tag v2.0.0 -->
<title>MQTT Device API Reference - Thingsboard</title>
<meta property="og:title" content="MQTT Device API Reference" />
<meta name="description" content="Supported MQTT API Reference for IoT Devices" />
<meta property="og:description" content="Supported MQTT API Reference for IoT Devices" />
<link rel="canonical" href="http://localhost:4000/docs/reference/mqtt-api/" />
<meta property="og:url" content="http://localhost:4000/docs/reference/mqtt-api/" />
<meta property="og:site_name" content="Thingsboard" />
<meta property="og:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "headline": "MQTT Device API Reference",
    "image": "http://localhost:4000/images/thingsboard_logo.png",
    "description": "Supported MQTT API Reference for IoT Devices",
    "logo": "http://localhost:4000/images/thingsboard_logo.png",
    "url": "http://localhost:4000/docs/reference/mqtt-api/"
  }
</script>
<!-- End Jekyll SEO tag -->
	
	
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">

	<link rel="stylesheet" href="/css/styles.css">
	<script type="text/javascript">
		/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
		!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
		/*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
		function onloadCSS(a,b){function c(){!d&&b&&(d=!0,b.call(a))}var d;a.addEventListener&&a.addEventListener("load",c),a.attachEvent&&a.attachEvent("onload",c),"isApplicationInstalled"in navigator&&"onloadcssdefined"in a&&a.onloadcssdefined(c)}
	</script>
	<script type="text/javascript">

		function jqueryDefer(method) {
			if (window.jQuery) {
				method();
			} else {
				setTimeout(function() {
					jqueryDefer(method)
				}, 50);
			}
		}

		function jqueryUiDefer(method) {
			if (window.jQuery && window.jQuery.ui) {
				method();
			} else {
				setTimeout(function() {
					jqueryUiDefer(method)
				}, 50);
			}
		}

		function loadScript(src, callback)
		{
			var s, r, t;
			r = false;
			s = document.createElement('script');
			s.type = 'text/javascript';
			s.src = src;
			s.onload = s.onreadystatechange = function() {
				if ( !r && (!this.readyState || this.readyState == 'complete') )
				{
					r = true;
					if (callback) {
						callback();
					}
				}
			};
			t = document.getElementsByTagName('script')[0];
			t.parentNode.insertBefore(s, t);
		}

		function loadCssAsync(src, callback) {
			var stylesheet = loadCSS( src );
			if (callback) {
				onloadCSS(stylesheet, callback);
			}
		}

		function loadNextScript(index, scriptsList, completeCallback) {
			if (index < scriptsList.length) {
				var script = scriptsList[index];
				if (script.type === 'script') {
					loadScript(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				} else if (script.type === 'css') {
					loadCssAsync(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				}
			} else if (completeCallback) {
				completeCallback();
			}
		}

		var initialScriptsList = [
			{src: '/js/jquery-2.2.0.min.js', type: 'script'},
			{src: '/css/jquery-ui.min.css', type: 'css'},
			{src: '/js/jquery-ui.min.js', type: 'script'},
			{src: '/js/script.js', type: 'script'},
			{src: '/css/sweetalert.css', type: 'css'},
			{src: '/js/sweetalert.min.js', type: 'script'}
		];

		loadNextScript(0, initialScriptsList);

	</script>
	<script type="text/javascript">
		function _gaLt(event) {
			/* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
			if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
				return;
			}
			var el = event.srcElement || event.target;

			while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
				el = el.parentNode;
			}
			if (el && el.href) {
				var link = el.href;
				if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
					var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
					if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
						target = "_blank";
					}

					var hbrun = false; // tracker has not yet run
					var hitBack = function() {
						if (hbrun) return;
						hbrun = true;
						window.location.href = link;
					};

					if (target) {
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search
						);
					} else {
						event.preventDefault ? event.preventDefault() : event.returnValue = !1;
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search, {
									"hitCallback": hitBack
								}
						);

						setTimeout(hitBack, 1000);
					}
				}
			}
		}

		var _w = window;
		var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
		_w.addEventListener ? _w.addEventListener("load", function() {document.body.addEventListener(_gaLtEvt, _gaLt, !1)}, !1)
				: _w.attachEvent && _w.attachEvent("onload", function() {document.body.attachEvent("on" + _gaLtEvt, _gaLt)});
	</script>
</head>
<body>
<div id="cellophane" onclick="tb.toggleMenu()"></div>
<header>
	<a href="#" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="#" class="button" id="viewDocs" data-auto-burger-exclude>&nbsp;&nbsp;主要功能&nbsp;&nbsp;</a>
		<a href="#" class="button" id="useCases" data-auto-burger-exclude>&nbsp;&nbsp;查看文档&nbsp;&nbsp;</a>
		<a href="#" class="button" id="useCases" data-auto-burger-exclude>&nbsp;&nbsp;案例分析&nbsp;&nbsp;</a>
		<a href="#" class="button" id="gettingStarted" data-auto-burger-exclude>&nbsp;&nbsp;开始使用&nbsp;&nbsp;</a>
		<button id="hamburger" onclick="tb.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main id="headNav" data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="#">开始使用<a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">查看文档</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">案例分析</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="http://osswangxining.github.io/">Blog</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">服务支持</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">联系我们</a></h3>
			</div>
		</main>

	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Thingsboard API reference</h1>
  <h5>Device connectivity and server-side APIs.</h5>
  <div id="vendorStrip" class="light-text">
    <div id="docsList">
        <ul>
          <li><a href="/docs/" >DOCS HOME</a></li>
          <li><a href="/docs/api/" class="YAH">API</a></li>
          <li><a href="/docs/iot-gateway/" >IOT GATEWAY</a></li>
          <li><a href="/docs/reference/" >REFERENCE</a></li>
          <li><a href="/docs/samples/" >SAMPLES</a></li>
          <li><a href="/iot-use-cases/" >USE CASES</a></li>
          <li><a href="/docs/iot-video-tutorials/" >VIDEO TUTORIALS</a></li>
          <li><a href="/docs/faq/" >FAQ</a></li>
          <li><a href="/docs/services/" >SERVICES</a></li>
          <li><a href="/docs/contact-us/" >CONTACT US</a></li>
        </ul>
    </div>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    </div>
  </div>
</section>





<section id="encyclopedia">
  
  <div id="docsToc" >
        <div class="pi-accordion">
        
    <a class="item" data-title="Thingsboard API reference" href="/docs/api/"></a>
    <a class="item" data-title="Device Connectivity Protocols" href="/docs/reference/protocols/"></a>
    <a class="item" data-title="MQTT Device API" href="/docs/reference/mqtt-api/"></a>
    <a class="item" data-title="CoAP Device API" href="/docs/reference/coap-api/"></a>
    <a class="item" data-title="HTTP Device API" href="/docs/reference/http-api/"></a>
    <a class="item" data-title="Administration REST API" href="/docs/reference/rest-api/"></a>
    <a class="item" data-title="MQTT Gateway API Reference" href="/docs/reference/gateway-mqtt-api/"></a>
        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="tb.toggleToc()"></button>
  </div> <!-- /docsToc -->
  
  <div id="docsContent" class="">
    <h1>MQTT Device API Reference</h1>
    <ul id="markdown-toc">
  <li><a href="#getting-started" id="markdown-toc-getting-started">Getting started</a>    <ul>
      <li><a href="#mqtt-basics" id="markdown-toc-mqtt-basics">MQTT basics</a></li>
      <li><a href="#client-libraries-setup" id="markdown-toc-client-libraries-setup">Client libraries setup</a></li>
      <li><a href="#mqtt-connect" id="markdown-toc-mqtt-connect">MQTT Connect</a></li>
    </ul>
  </li>
  <li><a href="#key-value-format" id="markdown-toc-key-value-format">Key-value format</a></li>
  <li><a href="#telemetry-upload-api" id="markdown-toc-telemetry-upload-api">Telemetry upload API</a></li>
  <li><a href="#attributes-api" id="markdown-toc-attributes-api">Attributes API</a>    <ul>
      <li><a href="#publish-attribute-update-to-the-server" id="markdown-toc-publish-attribute-update-to-the-server">Publish attribute update to the server</a></li>
      <li><a href="#request-attribute-values-from-the-server" id="markdown-toc-request-attribute-values-from-the-server">Request attribute values from the server</a></li>
      <li><a href="#subscribe-to-attribute-updates-from-the-server" id="markdown-toc-subscribe-to-attribute-updates-from-the-server">Subscribe to attribute updates from the server</a></li>
    </ul>
  </li>
  <li><a href="#rpc-api" id="markdown-toc-rpc-api">RPC API</a>    <ul>
      <li><a href="#server-side-rpc" id="markdown-toc-server-side-rpc">Server-side RPC</a></li>
      <li><a href="#client-side-rpc" id="markdown-toc-client-side-rpc">Client-side RPC</a></li>
    </ul>
  </li>
  <li><a href="#protocol-customization" id="markdown-toc-protocol-customization">Protocol customization</a></li>
</ul>

<h2 id="getting-started">Getting started</h2>

<h5 id="mqtt-basics">MQTT basics</h5>

<p><a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a> is a light-weight publish-subscribe messaging protocol which probably makes it the most suitable for various IoT devices. You can find more information about MQTT <a href="http://mqtt.org/">here</a>.</p>

<p>Thingsboard server nodes act as a MQTT Broker that support QoS levels 0 (at most once) and 1 (at least once) and a set of predefined topics.</p>

<h5 id="client-libraries-setup">Client libraries setup</h5>

<p>You can find huge amount of MQTT client libraries in the web. Examples in this article will be based on Mosquitto and MQTT.js.
In order to setup one of those tools, you can use instructions in our <a href="/docs/getting-started-guides/helloworld/">Hello World</a> guide.</p>

<h5 id="mqtt-connect">MQTT Connect</h5>

<p>We will use <em>access token</em> device credentials in this article and they will be referred to later as <strong>$ACCESS_TOKEN</strong>.
Application need to send MQTT CONNECT message with username that contains <strong>$ACCESS_TOKEN</strong>.
Possible return codes and their reasons during connect sequence:</p>

<ul>
  <li><strong>0x00 Connected</strong> - Successfully connected to Thingsboard MQTT server.</li>
  <li><strong>0x04 Connection Refused, bad user name or password</strong> - Username is empty.</li>
  <li><strong>0x05 Connection Refused, not authorized</strong> - Username contains invalid <strong>$ACCESS_TOKEN</strong>.</li>
</ul>

<h2 id="key-value-format">Key-value format</h2>

<p>By default, Thingsboard supports key-value content in JSON. Key is always a string, while value can be either string, boolean, double or long.
Using custom binary format or some serialization framework is also possible. See <a href="#protocol-customization">protocol customization</a> for more details.
For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"stringKey"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"booleanKey"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"doubleKey"</span><span class="p">:</span><span class="mf">42.0</span><span class="p">,</span><span class="w"> </span><span class="nt">"longKey"</span><span class="p">:</span><span class="mi">73</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="telemetry-upload-api">Telemetry upload API</h2>

<p>In order to publish telemetry data to Thingsboard server node, send PUBLISH message to the following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/telemetry
</code></pre>
</div>

<p>The simplest supported data formats are:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>or</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}]</span><span class="w">
</span></code></pre>
</div>

<p><strong>Please note</strong> that in this case, server-side timestamp will be assigned to uploaded data!</p>

<p>In case your device is able to get the client-side timestamp, you can use following format:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"ts"</span><span class="p">:</span><span class="mi">1451649600512</span><span class="p">,</span><span class="w"> </span><span class="nt">"values"</span><span class="p">:{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<p>In the example above, we assume that “1451649600512” is a <a href="https://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> with milliseconds precision.
For example, the value ‘1451649600512’ corresponds to ‘Fri, 01 Jan 2016 12:00:00.512 GMT’</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#mqtt-telemetry-upload").tabs();});
  }
</script>

<div id="mqtt-telemetry-upload">
  <ul>
    <li><a href="#A">Mosquitto</a></li>
    <li><a href="#B">MQTT.js</a></li>
    <li><a href="#C">telemetry-data-as-object.json</a></li>
    <li><a href="#D">telemetry-data-as-array.json</a></li>
    <li><a href="#E">telemetry-data-with-ts.json</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mosquitto-telemetry.sh" download="resources/mosquitto-telemetry.sh"><code>resources/mosquitto-telemetry.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mosquitto-telemetry.sh')" title="Copy resources/mosquitto-telemetry.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mosquitto-telemetry.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Publish data as an object without timestamp (server-side timestamp will be used)</span>
mosquitto_pub -d -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/telemetry"</span> -u <span class="s2">"</span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> -f <span class="s2">"telemetry-data-as-object.json"</span>
<span class="c"># Publish data as an array of objects without timestamp (server-side timestamp will be used)</span>
mosquitto_pub -d -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/telemetry"</span> -u <span class="s2">"</span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> -f <span class="s2">"telemetry-data-as-array.json"</span>
<span class="c"># Publish data as an object with timestamp (server-side timestamp will be used)</span>
mosquitto_pub -d -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/telemetry"</span> -u <span class="s2">"</span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> -f <span class="s2">"telemetry-data-with-ts.json"</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-telemetry.sh" download="resources/mqtt-js-telemetry.sh"><code>resources/mqtt-js-telemetry.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-telemetry.sh')" title="Copy resources/mqtt-js-telemetry.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-telemetry.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Publish data as an object without timestamp (server-side timestamp will be used)</span>
cat telemetry-data-as-object.json | mqtt pub -v -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/telemetry"</span> -u <span class="s1">'$ACCESS_TOKEN'</span> -s
<span class="c"># Publish data as an array of objects without timestamp (server-side timestamp will be used)</span>
cat telemetry-data-as-array.json | mqtt pub -v -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/telemetry"</span> -u <span class="s1">'$ACCESS_TOKEN'</span> -s
<span class="c"># Publish data as an object with timestamp (server-side timestamp will be used)</span>
cat telemetry-data-with-ts.json | mqtt pub -v -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/telemetry"</span> -u <span class="s1">'$ACCESS_TOKEN'</span> -s
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="C">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/telemetry-data-as-object.json" download="resources/telemetry-data-as-object.json"><code>resources/telemetry-data-as-object.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/telemetry-data-as-object.json')" title="Copy resources/telemetry-data-as-object.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/telemetry-data-as-object.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"key3"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="nt">"key4"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
  <div id="D">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/telemetry-data-as-array.json" download="resources/telemetry-data-as-array.json"><code>resources/telemetry-data-as-array.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/telemetry-data-as-array.json')" title="Copy resources/telemetry-data-as-array.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/telemetry-data-as-array.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">"key2"</span><span class="p">:</span><span class="kc">true</span><span class="p">}]</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
  <div id="E">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/telemetry-data-with-ts.json" download="resources/telemetry-data-with-ts.json"><code>resources/telemetry-data-with-ts.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/telemetry-data-with-ts.json')" title="Copy resources/telemetry-data-with-ts.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/telemetry-data-with-ts.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"ts"</span><span class="p">:</span><span class="mi">1451649600512</span><span class="p">,</span><span class="w"> </span><span class="nt">"values"</span><span class="p">:{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h2 id="attributes-api">Attributes API</h2>

<p>Thingsboard attributes API allows devices to</p>

<ul>
  <li>Upload <a href="/docs/user-guide/attributes/#attribute-types">client-side</a> device attributes to the server.</li>
  <li>Request <a href="/docs/user-guide/attributes/#attribute-types">client-side</a> and <a href="/docs/user-guide/attributes/#attribute-types">shared</a> device attributes from the server.</li>
  <li>Subscribe to <a href="/docs/user-guide/attributes/#attribute-types">shared</a> device attributes from the server.</li>
</ul>

<h5 id="publish-attribute-update-to-the-server">Publish attribute update to the server</h5>

<p>In order to publish client-side device attributes to Thingsboard server node, send PUBLISH message to the following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/attributes
</code></pre>
</div>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#mqtt-attributes-upload").tabs();});
  }
</script>

<div id="mqtt-attributes-upload">
  <ul>
    <li><a href="#A">Mosquitto</a></li>
    <li><a href="#B">MQTT.js</a></li>
    <li><a href="#C">new-attributes-values.json</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mosquitto-attributes-publish.sh" download="resources/mosquitto-attributes-publish.sh"><code>resources/mosquitto-attributes-publish.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mosquitto-attributes-publish.sh')" title="Copy resources/mosquitto-attributes-publish.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mosquitto-attributes-publish.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Publish client-side attributes update</span>
mosquitto_pub -d -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/attributes"</span> -u <span class="s2">"</span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> -f <span class="s2">"new-attributes-values.json"</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-attributes-publish.sh" download="resources/mqtt-js-attributes-publish.sh"><code>resources/mqtt-js-attributes-publish.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-attributes-publish.sh')" title="Copy resources/mqtt-js-attributes-publish.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-attributes-publish.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Publish client-side attributes update</span>
cat new-attributes-values.json | mqtt pub -d -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/attributes"</span> -u <span class="s1">'$ACCESS_TOKEN'</span> -s
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="C">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/new-attributes-values.json" download="resources/new-attributes-values.json"><code>resources/new-attributes-values.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/new-attributes-values.json')" title="Copy resources/new-attributes-values.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/new-attributes-values.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"attribute1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"attribute2"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"attribute3"</span><span class="p">:</span><span class="mf">42.0</span><span class="p">,</span><span class="w"> </span><span class="nt">"attribute4"</span><span class="p">:</span><span class="mi">73</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h5 id="request-attribute-values-from-the-server">Request attribute values from the server</h5>

<p>In order to request client-side or shared device attributes to Thingsboard server node, send PUBLISH message to the following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/attributes/request/<span class="nv">$request_id</span>
</code></pre>
</div>

<p>where <strong>$request_id</strong> is your integer request identifier.
Before sending PUBLISH message with the request, client need to subscribe to</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/attributes/response/+
</code></pre>
</div>

<p>The following example is written in javascript and is based on mqtt.js. 
Pure command-line examples are not available, because subscribe and publish need to happen in the same mqtt session.</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#mqtt-attributes-request").tabs();});
  }
</script>

<div id="mqtt-attributes-request">
  <ul>
    <li><a href="#A">MQTT.js</a></li>
    <li><a href="#B">mqtt-js-attributes-request.js</a></li>
    <li><a href="#C">Result</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-attributes-request.sh" download="resources/mqtt-js-attributes-request.sh"><code>resources/mqtt-js-attributes-request.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-attributes-request.sh')" title="Copy resources/mqtt-js-attributes-request.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-attributes-request.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">TOKEN</span><span class="o">=</span><span class="nv">$ACCESS_TOKEN</span>
node mqtt-js-attributes-request.js
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-attributes-request.js" download="resources/mqtt-js-attributes-request.js"><code>resources/mqtt-js-attributes-request.js</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-attributes-request.js')" title="Copy resources/mqtt-js-attributes-request.js to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-attributes-request.js" class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mqtt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mqtt'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">client</span>  <span class="o">=</span> <span class="nx">mqtt</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'mqtt://127.0.0.1'</span><span class="p">,{</span>
    <span class="na">username</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">TOKEN</span>
<span class="p">})</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'connect'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'connected'</span><span class="p">)</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'v1/devices/me/attributes/response/+'</span><span class="p">)</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'v1/devices/me/attributes/request/1'</span><span class="p">,</span> <span class="s1">'{"clientKeys":"attribute1,attribute2", "sharedKeys":"shared1,shared2"}'</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">topic</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'response.topic: '</span> <span class="o">+</span> <span class="nx">topic</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'response.body: '</span> <span class="o">+</span> <span class="nx">message</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
<span class="p">})</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="C">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/attributes-response.json" download="resources/attributes-response.json"><code>resources/attributes-response.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/attributes-response.json')" title="Copy resources/attributes-response.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/attributes-response.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
</div>

<p><strong>Please note</strong>, intersection of client-side and shared device attribute keys is a bad practise! 
However, it is still possible to have same keys for client, shared or even server-side attributes.</p>

<h5 id="subscribe-to-attribute-updates-from-the-server">Subscribe to attribute updates from the server</h5>

<p>In order to subscribe to shared device attribute changes, send SUBSCRIBE message to the following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/attributes
</code></pre>
</div>

<p>Once shared attribute will be changed by one of the server-side components (REST API or custom plugins)
client will receive following update:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#mqtt-attributes-subscribe").tabs();});
  }
</script>

<div id="mqtt-attributes-subscribe">
  <ul>
    <li><a href="#A">Mosquitto</a></li>
    <li><a href="#B">MQTT.js</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mosquitto-attributes-subscribe.sh" download="resources/mosquitto-attributes-subscribe.sh"><code>resources/mosquitto-attributes-subscribe.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mosquitto-attributes-subscribe.sh')" title="Copy resources/mosquitto-attributes-subscribe.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mosquitto-attributes-subscribe.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Subscribes to attribute updates</span>
mosquitto_sub -d -h <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/attributes"</span> -u <span class="s2">"</span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-attributes-subscribe.sh" download="resources/mqtt-js-attributes-subscribe.sh"><code>resources/mqtt-js-attributes-subscribe.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-attributes-subscribe.sh')" title="Copy resources/mqtt-js-attributes-subscribe.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-attributes-subscribe.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Subscribes to attribute updates</span>
mqtt sub -v <span class="s2">"127.0.0.1"</span> -t <span class="s2">"v1/devices/me/attributes"</span> -u <span class="s1">'$ACCESS_TOKEN'</span>
</code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h2 id="rpc-api">RPC API</h2>

<h3 id="server-side-rpc">Server-side RPC</h3>

<p>In order to subscribe to RPC commands from server, send SUBSCRIBE message to the following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/rpc/request/+
</code></pre>
</div>

<p>Once subscribed, client will receive individual commands as a PUBLISH message to corresponding topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/rpc/request/<span class="nv">$request_id</span>
</code></pre>
</div>

<p>where <strong>$request_id</strong> is an integer request identifier.</p>

<p>Client should publish the response to following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/rpc/response/<span class="nv">$request_id</span>
</code></pre>
</div>

<p>The following example is written in javascript and is based on mqtt.js. 
Pure command-line examples are not available, because subscribe and publish need to happen in the same mqtt session.</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#mqtt-rpc-from-server").tabs();});
  }
</script>

<div id="mqtt-rpc-from-server">
  <ul>
    <li><a href="#A">MQTT.js</a></li>
    <li><a href="#B">mqtt-js-rpc-from-server.js</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-rpc-from-server.sh" download="resources/mqtt-js-rpc-from-server.sh"><code>resources/mqtt-js-rpc-from-server.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-rpc-from-server.sh')" title="Copy resources/mqtt-js-rpc-from-server.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-rpc-from-server.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">TOKEN</span><span class="o">=</span><span class="nv">$ACCESS_TOKEN</span>
node mqtt-js-rpc-from-server.js
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-rpc-from-server.js" download="resources/mqtt-js-rpc-from-server.js"><code>resources/mqtt-js-rpc-from-server.js</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-rpc-from-server.js')" title="Copy resources/mqtt-js-rpc-from-server.js to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-rpc-from-server.js" class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mqtt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mqtt'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">client</span>  <span class="o">=</span> <span class="nx">mqtt</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'mqtt://127.0.0.1'</span><span class="p">,{</span>
    <span class="na">username</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">TOKEN</span>
<span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'connect'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'connected'</span><span class="p">);</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'v1/devices/me/rpc/request/+'</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">topic</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'request.topic: '</span> <span class="o">+</span> <span class="nx">topic</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'request.body: '</span> <span class="o">+</span> <span class="nx">message</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="kd">var</span> <span class="nx">requestId</span> <span class="o">=</span> <span class="nx">topic</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="s1">'v1/devices/me/rpc/request/'</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="c1">//client acts as an echo service</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'v1/devices/me/rpc/response/'</span> <span class="o">+</span> <span class="nx">requestId</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h3 id="client-side-rpc">Client-side RPC</h3>

<p>In order to send RPC commands to server, send PUBLISH message to the following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/rpc/request/<span class="nv">$request_id</span>
</code></pre>
</div>

<p>where <strong>$request_id</strong> is an integer request identifier.
The response from server will be published to the following topic:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>v1/devices/me/rpc/response/<span class="nv">$request_id</span>
</code></pre>
</div>

<p>The following example is written in javascript and is based on mqtt.js. 
Pure command-line examples are not available, because subscribe and publish need to happen in the same mqtt session.</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#mqtt-rpc-from-client").tabs();});
  }
</script>

<div id="mqtt-rpc-from-client">
  <ul>
    <li><a href="#A">MQTT.js</a></li>
    <li><a href="#B">mqtt-js-rpc-from-client.js</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-rpc-from-client.sh" download="resources/mqtt-js-rpc-from-client.sh"><code>resources/mqtt-js-rpc-from-client.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-rpc-from-client.sh')" title="Copy resources/mqtt-js-rpc-from-client.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-rpc-from-client.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">TOKEN</span><span class="o">=</span><span class="nv">$ACCESS_TOKEN</span>
node mqtt-js-rpc-from-client.js
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/mqtt-js-rpc-from-client.js" download="resources/mqtt-js-rpc-from-client.js"><code>resources/mqtt-js-rpc-from-client.js</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/mqtt-js-rpc-from-client.js')" title="Copy resources/mqtt-js-rpc-from-client.js to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/mqtt-js-rpc-from-client.js" class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mqtt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mqtt'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">mqtt</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'mqtt://127.0.0.1'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">username</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">TOKEN</span>
<span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'connect'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'connected'</span><span class="p">);</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'v1/devices/me/rpc/response/+'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">requestId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"method"</span><span class="p">:</span> <span class="s2">"getTime"</span><span class="p">,</span>
        <span class="s2">"params"</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">};</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'v1/devices/me/rpc/request/'</span> <span class="o">+</span> <span class="nx">requestId</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">request</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">topic</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'response.topic: '</span> <span class="o">+</span> <span class="nx">topic</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'response.body: '</span> <span class="o">+</span> <span class="nx">message</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="p">});</span>
</code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h2 id="protocol-customization">Protocol customization</h2>

<p>MQTT transport can be fully customized for specific use-case by changing the corresponding <a href="https://github.com/thingsboard/thingsboard/tree/master/transport/mqtt">module</a>.</p>

  </div>
</section>

<footer>
	<main class="light-text">
		
		<div id="miceType" class="center">&copy; 2016 - 2017 IoT套件</div>
	</main>

</footer>



<button class="flyout-button" onclick="tb.toggleToc()"></button>


<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
</body>
</html>
