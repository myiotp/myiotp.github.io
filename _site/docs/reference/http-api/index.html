

<!Doctype html>
<html id="docs" class="Thingsboard API reference">



<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- Begin Jekyll SEO tag v2.0.0 -->
<title>HTTP Device API Reference - Thingsboard</title>
<meta property="og:title" content="HTTP Device API Reference" />
<meta name="description" content="Supported HTTP API Reference for IoT Devices" />
<meta property="og:description" content="Supported HTTP API Reference for IoT Devices" />
<link rel="canonical" href="http://localhost:4000/docs/reference/http-api/" />
<meta property="og:url" content="http://localhost:4000/docs/reference/http-api/" />
<meta property="og:site_name" content="Thingsboard" />
<meta property="og:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "headline": "HTTP Device API Reference",
    "image": "http://localhost:4000/images/thingsboard_logo.png",
    "description": "Supported HTTP API Reference for IoT Devices",
    "logo": "http://localhost:4000/images/thingsboard_logo.png",
    "url": "http://localhost:4000/docs/reference/http-api/"
  }
</script>
<!-- End Jekyll SEO tag -->
	
	
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">

	<link rel="stylesheet" href="/css/styles.css">
	<script type="text/javascript">
		/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
		!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
		/*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
		function onloadCSS(a,b){function c(){!d&&b&&(d=!0,b.call(a))}var d;a.addEventListener&&a.addEventListener("load",c),a.attachEvent&&a.attachEvent("onload",c),"isApplicationInstalled"in navigator&&"onloadcssdefined"in a&&a.onloadcssdefined(c)}
	</script>
	<script type="text/javascript">

		function jqueryDefer(method) {
			if (window.jQuery) {
				method();
			} else {
				setTimeout(function() {
					jqueryDefer(method)
				}, 50);
			}
		}

		function jqueryUiDefer(method) {
			if (window.jQuery && window.jQuery.ui) {
				method();
			} else {
				setTimeout(function() {
					jqueryUiDefer(method)
				}, 50);
			}
		}

		function loadScript(src, callback)
		{
			var s, r, t;
			r = false;
			s = document.createElement('script');
			s.type = 'text/javascript';
			s.src = src;
			s.onload = s.onreadystatechange = function() {
				if ( !r && (!this.readyState || this.readyState == 'complete') )
				{
					r = true;
					if (callback) {
						callback();
					}
				}
			};
			t = document.getElementsByTagName('script')[0];
			t.parentNode.insertBefore(s, t);
		}

		function loadCssAsync(src, callback) {
			var stylesheet = loadCSS( src );
			if (callback) {
				onloadCSS(stylesheet, callback);
			}
		}

		function loadNextScript(index, scriptsList, completeCallback) {
			if (index < scriptsList.length) {
				var script = scriptsList[index];
				if (script.type === 'script') {
					loadScript(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				} else if (script.type === 'css') {
					loadCssAsync(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				}
			} else if (completeCallback) {
				completeCallback();
			}
		}

		var initialScriptsList = [
			{src: '/js/jquery-2.2.0.min.js', type: 'script'},
			{src: '/css/jquery-ui.min.css', type: 'css'},
			{src: '/js/jquery-ui.min.js', type: 'script'},
			{src: '/js/script.js', type: 'script'},
			{src: '/css/sweetalert.css', type: 'css'},
			{src: '/js/sweetalert.min.js', type: 'script'}
		];

		loadNextScript(0, initialScriptsList);

	</script>
	<script type="text/javascript">
		function _gaLt(event) {
			/* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
			if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
				return;
			}
			var el = event.srcElement || event.target;

			while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
				el = el.parentNode;
			}
			if (el && el.href) {
				var link = el.href;
				if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
					var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
					if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
						target = "_blank";
					}

					var hbrun = false; // tracker has not yet run
					var hitBack = function() {
						if (hbrun) return;
						hbrun = true;
						window.location.href = link;
					};

					if (target) {
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search
						);
					} else {
						event.preventDefault ? event.preventDefault() : event.returnValue = !1;
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search, {
									"hitCallback": hitBack
								}
						);

						setTimeout(hitBack, 1000);
					}
				}
			}
		}

		var _w = window;
		var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
		_w.addEventListener ? _w.addEventListener("load", function() {document.body.addEventListener(_gaLtEvt, _gaLt, !1)}, !1)
				: _w.attachEvent && _w.attachEvent("onload", function() {document.body.attachEvent("on" + _gaLtEvt, _gaLt)});
	</script>
</head>
<body>
<div id="cellophane" onclick="tb.toggleMenu()"></div>
<header>
	<a href="#" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="#" class="button" id="viewDocs" data-auto-burger-exclude>&nbsp;&nbsp;主要功能&nbsp;&nbsp;</a>
		<a href="#" class="button" id="useCases" data-auto-burger-exclude>&nbsp;&nbsp;查看文档&nbsp;&nbsp;</a>
		<a href="#" class="button" id="useCases" data-auto-burger-exclude>&nbsp;&nbsp;案例分析&nbsp;&nbsp;</a>
		<a href="#" class="button" id="gettingStarted" data-auto-burger-exclude>&nbsp;&nbsp;开始使用&nbsp;&nbsp;</a>
		<button id="hamburger" onclick="tb.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main id="headNav" data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="#">开始使用<a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">查看文档</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">案例分析</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="http://osswangxining.github.io/">Blog</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">服务支持</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="#">联系我们</a></h3>
			</div>
		</main>

	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Thingsboard API reference</h1>
  <h5>Device connectivity and server-side APIs.</h5>
  <div id="vendorStrip" class="light-text">
    <div id="docsList">
        <ul>
          <li><a href="/docs/" >DOCS HOME</a></li>
          <li><a href="/docs/api/" class="YAH">API</a></li>
          <li><a href="/docs/iot-gateway/" >IOT GATEWAY</a></li>
          <li><a href="/docs/reference/" >REFERENCE</a></li>
          <li><a href="/docs/samples/" >SAMPLES</a></li>
          <li><a href="/iot-use-cases/" >USE CASES</a></li>
          <li><a href="/docs/iot-video-tutorials/" >VIDEO TUTORIALS</a></li>
          <li><a href="/docs/faq/" >FAQ</a></li>
          <li><a href="/docs/services/" >SERVICES</a></li>
          <li><a href="/docs/contact-us/" >CONTACT US</a></li>
        </ul>
    </div>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    </div>
  </div>
</section>





<section id="encyclopedia">
  
  <div id="docsToc" >
        <div class="pi-accordion">
        
    <a class="item" data-title="Thingsboard API reference" href="/docs/api/"></a>
    <a class="item" data-title="Device Connectivity Protocols" href="/docs/reference/protocols/"></a>
    <a class="item" data-title="MQTT Device API" href="/docs/reference/mqtt-api/"></a>
    <a class="item" data-title="CoAP Device API" href="/docs/reference/coap-api/"></a>
    <a class="item" data-title="HTTP Device API" href="/docs/reference/http-api/"></a>
    <a class="item" data-title="Administration REST API" href="/docs/reference/rest-api/"></a>
    <a class="item" data-title="MQTT Gateway API Reference" href="/docs/reference/gateway-mqtt-api/"></a>
        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="tb.toggleToc()"></button>
  </div> <!-- /docsToc -->
  
  <div id="docsContent" class="">
    <h1>HTTP Device API Reference</h1>
    <ul id="markdown-toc">
  <li><a href="#getting-started" id="markdown-toc-getting-started">Getting started</a>    <ul>
      <li><a href="#http-basics" id="markdown-toc-http-basics">HTTP basics</a></li>
      <li><a href="#client-libraries-setup" id="markdown-toc-client-libraries-setup">Client libraries setup</a></li>
      <li><a href="#http-authentication-and-error-codes" id="markdown-toc-http-authentication-and-error-codes">HTTP Authentication and error codes</a></li>
    </ul>
  </li>
  <li><a href="#key-value-format" id="markdown-toc-key-value-format">Key-value format</a></li>
  <li><a href="#telemetry-upload-api" id="markdown-toc-telemetry-upload-api">Telemetry upload API</a></li>
  <li><a href="#attributes-api" id="markdown-toc-attributes-api">Attributes API</a>    <ul>
      <li><a href="#publish-attribute-update-to-the-server" id="markdown-toc-publish-attribute-update-to-the-server">Publish attribute update to the server</a></li>
      <li><a href="#request-attribute-values-from-the-server" id="markdown-toc-request-attribute-values-from-the-server">Request attribute values from the server</a></li>
      <li><a href="#subscribe-to-attribute-updates-from-the-server" id="markdown-toc-subscribe-to-attribute-updates-from-the-server">Subscribe to attribute updates from the server</a></li>
    </ul>
  </li>
  <li><a href="#rpc-api" id="markdown-toc-rpc-api">RPC API</a>    <ul>
      <li><a href="#server-side-rpc" id="markdown-toc-server-side-rpc">Server-side RPC</a></li>
      <li><a href="#client-side-rpc" id="markdown-toc-client-side-rpc">Client-side RPC</a></li>
    </ul>
  </li>
  <li><a href="#protocol-customization" id="markdown-toc-protocol-customization">Protocol customization</a></li>
</ul>

<h2 id="getting-started">Getting started</h2>

<h5 id="http-basics">HTTP basics</h5>

<p><a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> is a general-purpose network protocol that can be use in IoT applications. 
You can find more information about HTTP <a href="https://www.w3.org/Protocols/rfc2616/rfc2616.txt">here</a>.
HTTP protocol is TCP based, and uses request-response model.</p>

<p>Thingsboard server nodes act as a HTTP Server that supports both HTTP and HTTPS protocols.</p>

<h5 id="client-libraries-setup">Client libraries setup</h5>

<p>You can find HTTP client libraries for different programming languages in the web. Examples in this article will be based on <a href="https://en.wikipedia.org/wiki/CURL">curl</a>.
In order to setup this tool, you can use instructions in our <a href="/docs/getting-started-guides/helloworld/">Hello World</a> guide.</p>

<h5 id="http-authentication-and-error-codes">HTTP Authentication and error codes</h5>

<p>We will use <em>access token</em> device credentials in this article and they will be referred to later as <strong>$ACCESS_TOKEN</strong>.
Application need to include <strong>$ACCESS_TOKEN</strong> as a path parameter into each HTTP request.
Possible error codes and their reasons:</p>

<ul>
  <li><strong>400 Bad Request</strong> - Invalid URL, request parameters or body.</li>
  <li><strong>401 Unauthorized</strong> - Invalid <strong>$ACCESS_TOKEN</strong>.</li>
  <li><strong>404 Not Found</strong> - Resource not found.</li>
</ul>

<h2 id="key-value-format">Key-value format</h2>

<p>By default, Thingsboard supports key-value content in JSON. Key is always a string, while value can be either string, boolean, double or long.
Using custom binary format or some serialization framework is also possible. See <a href="#protocol-customization">protocol customization</a> for more details.
For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"stringKey"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"booleanKey"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"doubleKey"</span><span class="p">:</span><span class="mf">42.0</span><span class="p">,</span><span class="w"> </span><span class="nt">"longKey"</span><span class="p">:</span><span class="mi">73</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="telemetry-upload-api">Telemetry upload API</h2>

<p>In order to publish telemetry data to Thingsboard server node, send POST request to the following URL:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>http<span class="o">(</span>s<span class="o">)</span>://host:port/api/v1/<span class="nv">$ACCESS_TOKEN</span>/telemetry
</code></pre>
</div>

<p>The simplest supported data formats are:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>or</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}]</span><span class="w">
</span></code></pre>
</div>

<p><strong>Please note</strong> that in this case, server-side timestamp will be assigned to uploaded data!</p>

<p>In case your device is able to get the client-side timestamp, you can use following format:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"ts"</span><span class="p">:</span><span class="mi">1451649600512</span><span class="p">,</span><span class="w"> </span><span class="nt">"values"</span><span class="p">:{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<p>In the example above, we assume that “1451649600512” is a <a href="https://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> with milliseconds precision.
For example, the value ‘1451649600512’ corresponds to ‘Fri, 01 Jan 2016 12:00:00.512 GMT’</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#http-telemetry-upload").tabs();});
  }
</script>

<div id="http-telemetry-upload">
  <ul>
    <li><a href="#A">Example</a></li>
    <li><a href="#B">telemetry-data-as-object.json</a></li>
    <li><a href="#C">telemetry-data-as-array.json</a></li>
    <li><a href="#D">telemetry-data-with-ts.json</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/http-telemetry.sh" download="resources/http-telemetry.sh"><code>resources/http-telemetry.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/http-telemetry.sh')" title="Copy resources/http-telemetry.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/http-telemetry.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Publish data as an object without timestamp (server-side timestamp will be used)</span>
curl -v -X POST -d @telemetry-data-as-object.json http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/telemetry --header <span class="s2">"Content-Type:application/json"</span>
<span class="c"># Publish data as an array of objects without timestamp (server-side timestamp will be used)</span>
curl -v -X POST -d @telemetry-data-as-array.json http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/telemetry --header <span class="s2">"Content-Type:application/json"</span>
<span class="c"># Publish data as an object with timestamp (server-side timestamp will be used)</span>
curl -v -X POST -d @telemetry-data-with-ts.json http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/telemetry --header <span class="s2">"Content-Type:application/json"</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/telemetry-data-as-object.json" download="resources/telemetry-data-as-object.json"><code>resources/telemetry-data-as-object.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/telemetry-data-as-object.json')" title="Copy resources/telemetry-data-as-object.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/telemetry-data-as-object.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"key3"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="nt">"key4"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
  <div id="C">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/telemetry-data-as-array.json" download="resources/telemetry-data-as-array.json"><code>resources/telemetry-data-as-array.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/telemetry-data-as-array.json')" title="Copy resources/telemetry-data-as-array.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/telemetry-data-as-array.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">"key2"</span><span class="p">:</span><span class="kc">true</span><span class="p">}]</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
  <div id="D">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/telemetry-data-with-ts.json" download="resources/telemetry-data-with-ts.json"><code>resources/telemetry-data-with-ts.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/telemetry-data-with-ts.json')" title="Copy resources/telemetry-data-with-ts.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/telemetry-data-with-ts.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"ts"</span><span class="p">:</span><span class="mi">1451649600512</span><span class="p">,</span><span class="w"> </span><span class="nt">"values"</span><span class="p">:{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"key2"</span><span class="p">:</span><span class="s2">"value2"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h2 id="attributes-api">Attributes API</h2>

<p>Thingsboard attributes API allows devices to</p>

<ul>
  <li>Upload <a href="/docs/user-guide/attributes/#attribute-types">client-side</a> device attributes to the server.</li>
  <li>Request <a href="/docs/user-guide/attributes/#attribute-types">client-side</a> and <a href="/docs/user-guide/attributes/#attribute-types">shared</a> device attributes from the server.</li>
  <li>Subscribe to <a href="/docs/user-guide/attributes/#attribute-types">shared</a> device attributes from the server.</li>
</ul>

<h5 id="publish-attribute-update-to-the-server">Publish attribute update to the server</h5>

<p>In order to publish client-side device attributes to Thingsboard server node, send POST request to the following URL:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>http<span class="o">(</span>s<span class="o">)</span>://host:port/api/v1/<span class="nv">$ACCESS_TOKEN</span>/attributes
</code></pre>
</div>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#http-attributes-upload").tabs();});
  }
</script>

<div id="http-attributes-upload">
  <ul>
    <li><a href="#A">Example</a></li>
    <li><a href="#C">new-attributes-values.json</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/http-attributes-publish.sh" download="resources/http-attributes-publish.sh"><code>resources/http-attributes-publish.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/http-attributes-publish.sh')" title="Copy resources/http-attributes-publish.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/http-attributes-publish.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Publish client-side attributes update</span>
curl -v -X POST -d @new-attributes-values.json http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/attributes --header <span class="s2">"Content-Type:application/json"</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="C">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/new-attributes-values.json" download="resources/new-attributes-values.json"><code>resources/new-attributes-values.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/new-attributes-values.json')" title="Copy resources/new-attributes-values.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/new-attributes-values.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"attribute1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"attribute2"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"attribute3"</span><span class="p">:</span><span class="mf">42.0</span><span class="p">,</span><span class="w"> </span><span class="nt">"attribute4"</span><span class="p">:</span><span class="mi">73</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h5 id="request-attribute-values-from-the-server">Request attribute values from the server</h5>

<p>In order to request client-side or shared device attributes to Thingsboard server node, send GET request to the following URL:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>http<span class="o">(</span>s<span class="o">)</span>://host:port/api/v1/<span class="nv">$ACCESS_TOKEN</span>/attributes?clientKeys<span class="o">=</span>attribute1,attribute2&amp;sharedKeys<span class="o">=</span>shared1,shared2
</code></pre>
</div>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#http-attributes-request").tabs();});
  }
</script>

<div id="http-attributes-request">
  <ul>
    <li><a href="#A">Example</a></li>
    <li><a href="#B">Result</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/http-attributes-request.sh" download="resources/http-attributes-request.sh"><code>resources/http-attributes-request.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/http-attributes-request.sh')" title="Copy resources/http-attributes-request.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/http-attributes-request.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Send HTTP attributes request</span>
curl -v -X GET http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/attributes?clientKeys<span class="o">=</span>attribute1,attribute2&amp;sharedKeys<span class="o">=</span>shared1,shared2
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/attributes-response.json" download="resources/attributes-response.json"><code>resources/attributes-response.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/attributes-response.json')" title="Copy resources/attributes-response.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/attributes-response.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
</div>

<p><strong>Please note</strong>, intersection of client-side and shared device attribute keys is a bad practise! 
However, it is still possible to have same keys for client, shared or even server-side attributes.</p>

<h5 id="subscribe-to-attribute-updates-from-the-server">Subscribe to attribute updates from the server</h5>

<p>In order to subscribe to shared device attribute changes, send GET request with optional “timeout” request parameter to the following URL:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>http<span class="o">(</span>s<span class="o">)</span>://host:port/api/v1/<span class="nv">$ACCESS_TOKEN</span>/attributes/updates
</code></pre>
</div>

<p>Once shared attribute will be changed by one of the server-side components (REST API or custom plugins)
client will receive following update:</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#http-attributes-subscribe").tabs();});
  }
</script>

<div id="http-attributes-subscribe">
  <ul>
    <li><a href="#A">Example</a></li>
    <li><a href="#B">Result</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/http-attributes-subscribe.sh" download="resources/http-attributes-subscribe.sh"><code>resources/http-attributes-subscribe.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/http-attributes-subscribe.sh')" title="Copy resources/http-attributes-subscribe.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/http-attributes-subscribe.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Send subscribe attributes request with 20 seconds timeout</span>
curl -v -X GET http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/attributes/updates?timeout<span class="o">=</span>20000
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/attributes-response.json" download="resources/attributes-response.json"><code>resources/attributes-response.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/attributes-response.json')" title="Copy resources/attributes-response.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/attributes-response.json" class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h2 id="rpc-api">RPC API</h2>

<h3 id="server-side-rpc">Server-side RPC</h3>

<p>In order to subscribe to RPC commands from server, send GET request with optional “timeout” request parameter to the following URL:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>http<span class="o">(</span>s<span class="o">)</span>://host:port/api/v1/<span class="nv">$ACCESS_TOKEN</span>/rpc
</code></pre>
</div>

<p>Once subscribed, client may receive rpc request or timeout message if there is no requests to particular device.
An example of RPC request body is shown below:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"setGpio"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"pin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>where</p>

<ul>
  <li><strong>id</strong> - request id, integer request identifier</li>
  <li><strong>method</strong> - RPC method name, string</li>
  <li><strong>params</strong> - RPC method params, custom json object</li>
</ul>

<p>and can reply to them using POST request to the following URL:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>http://host:port/api/v1/<span class="nv">$ACCESS_TOKEN</span>/rpc/<span class="o">{</span><span class="nv">$id</span><span class="o">}</span>
</code></pre>
</div>

<p>where <strong>$id</strong> is an integer request identifier.</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#http-rpc-from-server").tabs();});
  }
</script>

<div id="http-rpc-from-server">
  <ul>
    <li><a href="#A">Example Subscribe</a></li>
    <li><a href="#B">Example Reply</a></li>
    <li><a href="#C">Reply Body</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/http-rpc-subscribe.sh" download="resources/http-rpc-subscribe.sh"><code>resources/http-rpc-subscribe.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/http-rpc-subscribe.sh')" title="Copy resources/http-rpc-subscribe.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/http-rpc-subscribe.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Send rpc request with 20 seconds timeout</span>
curl -v -X GET http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/rpc?timeout<span class="o">=</span>20000
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/http-rpc-reply.sh" download="resources/http-rpc-reply.sh"><code>resources/http-rpc-reply.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/http-rpc-reply.sh')" title="Copy resources/http-rpc-reply.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/http-rpc-reply.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Publish response to RPC request</span>
curl -v -X POST -d @rpc-response.json http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/rpc/1 --header <span class="s2">"Content-Type:application/json"</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="C">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/rpc-response.json" download="resources/rpc-response.json"><code>resources/rpc-response.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/rpc-response.json')" title="Copy resources/rpc-response.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/rpc-response.json" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">{</span><span class="s2">"result"</span>:<span class="s2">"ok"</span><span class="o">}</span>
</code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h3 id="client-side-rpc">Client-side RPC</h3>

<p>In order to send RPC commands to server, send POST request to the following URL:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>http://host:port/api/v1/<span class="nv">$ACCESS_TOKEN</span>/rpc
</code></pre>
</div>

<p>Both request and response body should be a valid JSON documents. Content of the documents is specific to the plugin that will handle your request.</p>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){$("#http-rpc-from-client").tabs();});
  }
</script>

<div id="http-rpc-from-client">
  <ul>
    <li><a href="#A">Example Request</a></li>
    <li><a href="#B">Request Body</a></li>
    <li><a href="#C">Response Body</a></li>
  </ul>
  <div id="A">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/http-rpc-from-client.sh" download="resources/http-rpc-from-client.sh"><code>resources/http-rpc-from-client.sh</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/http-rpc-from-client.sh')" title="Copy resources/http-rpc-from-client.sh to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/http-rpc-from-client.sh" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Post client-side rpc request</span>
curl -X POST -d @rpc-client-request.json http://localhost:8080/api/v1/<span class="nv">$ACCESS_TOKEN</span>/rpc --header <span class="s2">"Content-Type:application/json"</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="B">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/rpc-client-request.json" download="resources/rpc-client-request.json"><code>resources/rpc-client-request.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/rpc-client-request.json')" title="Copy resources/rpc-client-request.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/rpc-client-request.json" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">{</span><span class="s2">"method"</span>: <span class="s2">"getTime"</span>, <span class="s2">"params"</span>:<span class="o">{}}</span>
</code></pre>
</div>
</td></tr></table>
  </div>
  <div id="C">
    <table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/thingsboard/thingsboard.github.io/master/docs/reference/resources/rpc-server-response.json" download="resources/rpc-server-response.json"><code>resources/rpc-server-response.json</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('resources/rpc-server-response.json')" title="Copy resources/rpc-server-response.json to clipboard" /></th></tr></thead>
<tr><td>
<div id="resources/rpc-server-response.json" class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">{</span><span class="s2">"time"</span>:<span class="s2">"2016 11 21 12:54:44.287"</span><span class="o">}</span>
</code></pre>
</div>
</td></tr></table>
  </div>
</div>

<h2 id="protocol-customization">Protocol customization</h2>

<p>HTTP transport can be fully customized for specific use-case by changing the corresponding <a href="https://github.com/thingsboard/thingsboard/tree/master/transport/http">module</a>.</p>

  </div>
</section>

<footer>
	<main class="light-text">
		
		<div id="miceType" class="center">&copy; 2016 - 2017 IoT套件</div>
	</main>

</footer>



<button class="flyout-button" onclick="tb.toggleToc()"></button>


<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
</body>
</html>
