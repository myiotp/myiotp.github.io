

<!Doctype html>
<html id="docs" class="Thingsboard IoT Gateway">



<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- Begin Jekyll SEO tag v2.0.0 -->
<title>MQTT Extension Configuration - Thingsboard</title>
<meta property="og:title" content="MQTT Extension Configuration" />
<meta name="description" content="MQTT protocol support for Thingsboard IoT Gateway" />
<meta property="og:description" content="MQTT protocol support for Thingsboard IoT Gateway" />
<link rel="canonical" href="http://localhost:4000/docs/iot-gateway/mqtt/" />
<meta property="og:url" content="http://localhost:4000/docs/iot-gateway/mqtt/" />
<meta property="og:site_name" content="Thingsboard" />
<meta property="og:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:image" content="http://localhost:4000/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "headline": "MQTT Extension Configuration",
    "image": "http://localhost:4000/images/thingsboard_logo.png",
    "description": "MQTT protocol support for Thingsboard IoT Gateway",
    "logo": "http://localhost:4000/images/thingsboard_logo.png",
    "url": "http://localhost:4000/docs/iot-gateway/mqtt/"
  }
</script>
<!-- End Jekyll SEO tag -->
	
	
	<meta name="twitter:description" content="MQTT protocol support for Thingsboard IoT Gateway"/>
	
	
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
	<link rel="stylesheet" href="/css/styles.css">
	<script type="text/javascript">
		/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
		!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
		/*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
		function onloadCSS(a,b){function c(){!d&&b&&(d=!0,b.call(a))}var d;a.addEventListener&&a.addEventListener("load",c),a.attachEvent&&a.attachEvent("onload",c),"isApplicationInstalled"in navigator&&"onloadcssdefined"in a&&a.onloadcssdefined(c)}
	</script>
	<script type="text/javascript">

		function jqueryDefer(method) {
			if (window.jQuery) {
				method();
			} else {
				setTimeout(function() {
					jqueryDefer(method)
				}, 50);
			}
		}

		function jqueryUiDefer(method) {
			if (window.jQuery && window.jQuery.ui) {
				method();
			} else {
				setTimeout(function() {
					jqueryUiDefer(method)
				}, 50);
			}
		}

		function loadScript(src, callback)
		{
			var s, r, t;
			r = false;
			s = document.createElement('script');
			s.type = 'text/javascript';
			s.src = src;
			s.onload = s.onreadystatechange = function() {
				if ( !r && (!this.readyState || this.readyState == 'complete') )
				{
					r = true;
					if (callback) {
						callback();
					}
				}
			};
			t = document.getElementsByTagName('script')[0];
			t.parentNode.insertBefore(s, t);
		}

		function loadCssAsync(src, callback) {
			var stylesheet = loadCSS( src );
			if (callback) {
				onloadCSS(stylesheet, callback);
			}
		}

		function loadNextScript(index, scriptsList, completeCallback) {
			if (index < scriptsList.length) {
				var script = scriptsList[index];
				if (script.type === 'script') {
					loadScript(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				} else if (script.type === 'css') {
					loadCssAsync(script.src, function() {
						index++;
						loadNextScript(index, scriptsList, completeCallback);
					});
				}
			} else if (completeCallback) {
				completeCallback();
			}
		}

		var initialScriptsList = [
			{src: '/js/jquery-2.2.0.min.js', type: 'script'},
			{src: '/css/jquery-ui.min.css', type: 'css'},
			{src: '/js/jquery-ui.min.js', type: 'script'},
			{src: '/js/script.js', type: 'script'},
			{src: '/css/sweetalert.css', type: 'css'},
			{src: '/js/sweetalert.min.js', type: 'script'}
		];

		loadNextScript(0, initialScriptsList);

	</script>
	<script type="text/javascript">
		function _gaLt(event) {
			/* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
			if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
				return;
			}
			var el = event.srcElement || event.target;

			while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
				el = el.parentNode;
			}
			if (el && el.href) {
				var link = el.href;
				if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
					var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
					if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
						target = "_blank";
					}

					var hbrun = false; // tracker has not yet run
					var hitBack = function() {
						if (hbrun) return;
						hbrun = true;
						window.location.href = link;
					};

					if (target) {
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search
						);
					} else {
						event.preventDefault ? event.preventDefault() : event.returnValue = !1;
						ga(
								"send", "event", "Outgoing Links", link,
								document.location.pathname + document.location.search, {
									"hitCallback": hitBack
								}
						);

						setTimeout(hitBack, 1000);
					}
				}
			}
		}

		var _w = window;
		var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
		_w.addEventListener ? _w.addEventListener("load", function() {document.body.addEventListener(_gaLtEvt, _gaLt, !1)}, !1)
				: _w.attachEvent && _w.attachEvent("onload", function() {document.body.attachEvent("on" + _gaLtEvt, _gaLt)});
	</script>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
					(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-88383331-1', 'auto');
		ga('send', 'pageview');
	</script>
</head>
<body>
<div id="cellophane" onclick="tb.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div id="githubButtonContainer">
		<iframe id="gh-btn-frame" src="https://ghbtns.com/github-btn.html?user=thingsboard&repo=thingsboard&type=star&count=true&size=large"
				frameborder="0"
				scrolling="0" width="130px" height="30px"></iframe>
	</div>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a>
		<a href="/iot-use-cases/" class="button" id="useCases" data-auto-burger-exclude>Use cases</a>
		<a href="/docs/getting-started-guides/helloworld/" class="button" id="gettingStarted" data-auto-burger-exclude>Getting started</a>
		<a target="_blank" href="https://demo.thingsboard.io/signup" class="button" id="liveDemo" data-auto-burger-exclude>Live demo</a>
		<button id="hamburger" onclick="tb.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main id="headNav" data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/getting-started-guides/helloworld/">Get Started</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="/iot-use-cases/">Use cases</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.thingsboard.io/">Blog</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/services/">Services</a></h3>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/contact-us/">Contact us</a></h3>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="center">
				<div class="social">
					<a href="https://twitter.com/thingsboard" class="twitter"><span>Twitter</span></a>
					<a href="https://github.com/thingsboard/thingsboard" class="github"><span>Github</span></a>
					<a href="https://gitter.im/thingsboard/chat" class="gitter"><span>Gitter</span></a>
					<a href="http://stackoverflow.com/questions/tagged/thingsboard" class="stack-overflow"><span>Stack Overflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/thingsboard" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://www.youtube.com/channel/UCDb9fsV-YR4JmnipAMGsVAQ" class="youtube"><span>YouTube Channel</span></a>
					<a href="https://www.facebook.com/thingsboard" class="facebook"><span>Facebook Page</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Thingsboard IoT Gateway</h1>
  <h5>Integrate legacy and third-party systems with Thingsboard platform using IoT Gateway.</h5>
  <div id="vendorStrip" class="light-text">
    <div id="docsList">
        <ul>
          <li><a href="/docs/" >DOCS HOME</a></li>
          <li><a href="/docs/api/" >API</a></li>
          <li><a href="/docs/iot-gateway/" class="YAH">IOT GATEWAY</a></li>
          <li><a href="/docs/reference/" >REFERENCE</a></li>
          <li><a href="/docs/samples/" >SAMPLES</a></li>
          <li><a href="/iot-use-cases/" >USE CASES</a></li>
          <li><a href="/docs/iot-video-tutorials/" >VIDEO TUTORIALS</a></li>
          <li><a href="/docs/faq/" >FAQ</a></li>
          <li><a href="/docs/services/" >SERVICES</a></li>
          <li><a href="/docs/contact-us/" >CONTACT US</a></li>
        </ul>
    </div>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    </div>
  </div>
</section>





<section id="encyclopedia">
  
  <div id="docsToc" >
        <div class="pi-accordion">
        
    <a class="item" data-title="IoT Gateway" href="/docs/iot-gateway/"></a>
    <a class="item" data-title="What is Thingsboard IoT Gateway?" href="/docs/iot-gateway/what-is-iot-gateway/"></a>
    <a class="item" data-title="Getting Started" href="/docs/iot-gateway/getting-started/"></a>
<div class="item" data-title="Installation guide">
  <div class="container">
    <a class="item" data-title="Installation options" href="/docs/iot-gateway/installation/"></a>
    <a class="item" data-title="Windows" href="/docs/iot-gateway/install/windows/"></a>
    <a class="item" data-title="Linux (Ubuntu & CentOS)" href="/docs/iot-gateway/install/linux/"></a>
    <a class="item" data-title="Raspberry Pi" href="/docs/iot-gateway/install/rpi/"></a>
    <a class="item" data-title="Building from sources" href="/docs/iot-gateway/install/building-from-source/"></a>
    <a class="item" data-title="Upgrade instructions" href="/docs/iot-gateway/install/upgrade-instructions/"></a>
  </div>
</div>
<div class="item" data-title="Configuration guide">
  <div class="container">
    <a class="item" data-title="General configuration" href="/docs/iot-gateway/configuration/"></a>
    <a class="item" data-title="OPC-UA Extension" href="/docs/iot-gateway/opc-ua/"></a>
    <a class="item" data-title="MQTT Extension" href="/docs/iot-gateway/mqtt/"></a>
    <a class="item" data-title="Sigfox Extension" href="/docs/iot-gateway/sigfox/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="tb.toggleToc()"></button>
  </div> <!-- /docsToc -->
  
  <div id="docsContent" class="">
    <h1>MQTT Extension Configuration</h1>
    <ul id="markdown-toc">
  <li><a href="#extension-configuration-mqtt-configjson" id="markdown-toc-extension-configuration-mqtt-configjson">Extension configuration: mqtt-config.json</a>    <ul>
      <li><a href="#basic-connection-properties" id="markdown-toc-basic-connection-properties">Basic connection properties</a></li>
      <li><a href="#client-identity-properties" id="markdown-toc-client-identity-properties">Client identity properties</a></li>
      <li><a href="#mapping" id="markdown-toc-mapping">Mapping</a>        <ul>
          <li><a href="#attributes--timeseries-data-upload" id="markdown-toc-attributes--timeseries-data-upload">Attributes &amp; Timeseries data upload</a></li>
          <li><a href="#device-connect--disconnect-requests" id="markdown-toc-device-connect--disconnect-requests">Device connect &amp; disconnect requests</a></li>
          <li><a href="#device-attributes-requests" id="markdown-toc-device-attributes-requests">Device attributes requests</a></li>
          <li><a href="#device-attribute-updates" id="markdown-toc-device-attribute-updates">Device attribute updates</a></li>
          <li><a href="#server-side-rpc-commands" id="markdown-toc-server-side-rpc-commands">Server side RPC commands</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#next-steps" id="markdown-toc-next-steps">Next steps</a></li>
</ul>

<p>This guide will help you to get familiar with OPC-UA extension configuration for Thingsboard IoT Gateway.
Use <a href="/docs/iot-gateway/configuration/">general configuration</a> to enable this extension.
We will describe extension configuration file below.</p>

<h3 id="extension-configuration-mqtt-configjson">Extension configuration: mqtt-config.json</h3>

<p>Extension configuration is a JSON file that contain information about how to connect and monitor list of MQTT brokers.
The root JSON element should contain “brokers” array. Each broker in the array is configured using following properties:</p>

<h4 id="basic-connection-properties">Basic connection properties</h4>

<table>
  <thead>
    <tr>
      <th><strong>Property</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Default Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>host</td>
      <td>MQTT broker host</td>
      <td>localhost</td>
    </tr>
    <tr>
      <td>port</td>
      <td>MQTT broker port</td>
      <td>1883</td>
    </tr>
    <tr>
      <td>ssl</td>
      <td>Boolean flag to enable/disable encrypted connection</td>
      <td>false</td>
    </tr>
    <tr>
      <td>truststore</td>
      <td>Path to the Truststore file for encrypted connection</td>
      <td>empty</td>
    </tr>
    <tr>
      <td>truststorePassword</td>
      <td>Password to the Truststore</td>
      <td>empty</td>
    </tr>
    <tr>
      <td>retryInterval</td>
      <td>Interval to retry connection in milliseconds</td>
      <td>3000</td>
    </tr>
    <tr>
      <td>clientId</td>
      <td>MQTT client id. If not set auto-generated UUID used</td>
      <td>random UUID</td>
    </tr>
  </tbody>
</table>

<p>For Example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"brokers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">1883</span><span class="p">,</span><span class="w">
      </span><span class="nt">"ssl"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"retryInterval"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="client-identity-properties">Client identity properties</h4>

<p>MQTT extension supports next client credentials:</p>
<ul>
  <li>“anonymous”</li>
  <li>“basic”</li>
  <li>“cert.PEM”</li>
</ul>

<p>Example of anonymous identity configuration:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
      </span><span class="nt">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"anonymous"</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
      
</span></code></pre>
</div>

<p>Example of basic identity configuration:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
      </span><span class="nt">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your username"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
      
</span></code></pre>
</div>

<p>Example of PEM certificate identity configuration:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="nt">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cert.PEM"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"caCert"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Path to Your CA certificate file"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Path to Your private key file"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cert"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Path to Your certificate file"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<h4 id="mapping">Mapping</h4>

<p>This section will describe various configuration options that allow to specify mapping between Thingsboard features and existing/legacy device protocols.</p>

<h5 id="attributes--timeseries-data-upload">Attributes &amp; Timeseries data upload</h5>

<p>The “<strong>mapping</strong>” configuration setup rules of MQTT topics monitoring and data conversion to Thingsboard Key-Value format. 
For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="nt">"mapping"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"topicFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensors"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"converter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"filterExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nt">"deviceNameJsonExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${$.serialNumber}"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${$.model}"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nt">"timeseries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"double"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"temperature"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${$.temperature}"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><strong>Note</strong>: You can specify multiple mapping objects inside array.</p>

<p>Mapping process subscribes to the MQTT topics using <strong>topicFilter</strong> parameter of the mapping object. 
Each message that is published to this topic by other devices or applications is analyzed to extract device name and device data (attributes or timeseries values).
By default, gateway use <a href="https://github.com/thingsboard/thingsboard-gateway/blob/release-1.0/src/main/java/org/thingsboard/gateway/extensions/mqtt/client/conf/mapping/MqttJsonConverter.java">Json converter</a>, but you can customize this behaviour and implement your own converter. See <a href="https://github.com/thingsboard/thingsboard-gateway/blob/release-1.0/src/main/java/org/thingsboard/gateway/extensions/mqtt/client/conf/mapping/MqttDataConverter.java">converter interface</a> for more details.</p>

<p>The Json converter is based on <a href="https://github.com/jayway/JsonPath"><strong>JsonPath</strong></a> library to provide ability of flexible mapping and filtering of JSON structures.
You can define <strong>filterExpression</strong> based on the <a href="https://github.com/jayway/JsonPath#path-examples"><strong>path</strong></a> and <a href="https://github.com/jayway/JsonPath#filter-operators"><strong>filter</strong></a> examples.</p>

<p>The <strong>deviceNameJsonExpression</strong> mapping parameter is used to extract device name from the incoming JSON message.</p>

<p>The <strong>timeout</strong> mapping parameter is optional inactivity timeout in milliseconds. If this parameter is specified, the gateway will report that device is disconnected once there is no new telemetry or attribute updates within particular timeout.</p>

<p>For example, if you have following message:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"serialNumber"</span><span class="p">:</span><span class="s2">"SN-001"</span><span class="p">,</span><span class="w"> </span><span class="nt">"model"</span><span class="p">:</span><span class="s2">"T1000"</span><span class="p">,</span><span class="w"> </span><span class="nt">"temperature"</span><span class="p">:</span><span class="mf">36.6</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The <strong>”${$.serialNumber}”</strong> expression will return <strong>“SN-001”</strong> device name. Similar, <strong>“Device ${$.serialNumber} (${$.model})”</strong> will return <strong>“Device SN-001 (T1000)”</strong> device name.</p>

<p>If device name is a part of the MQTT topic, you can use <strong>deviceNameTopicExpression</strong> parameter, which is basically Java regular expression.</p>

<p>For example, if you have <strong>“sensor/SN-001/temperature”</strong>” topic, the <strong>”(?&lt;=sensor\/)(.*?)(?=\/temperature)”</strong> expression will return <strong>“SN-001”</strong> device name.</p>

<p>Similar <a href="https://github.com/jayway/JsonPath"><strong>JsonPath</strong></a> mapping rules are applied for <strong>attributes</strong> and <strong>timeseries</strong> values:</p>

<ul>
  <li><strong>key</strong> - constant Attribute or Timeseries Thingsboard key.</li>
  <li><strong>type</strong> - either boolean, long, double or string.</li>
  <li><strong>value</strong> - expression based on JsonPath syntax that may be specified inside <strong>${}</strong></li>
</ul>

<h5 id="device-connect--disconnect-requests">Device connect &amp; disconnect requests</h5>

<p>Thingsboard allows to send RPC commands and notifications about device attribute updates to the device. 
But in order to send them, platform needs to know if the target device is connected and what gateway or session is used to connect device at the moment.
If your device is constantly sending telemetry data - Thingsboard already knows how to push notifications.
If your device just connects to MQTT broker and waits for commands/updates, you need to send a message to the Gateway and inform that device is connected to the broker.</p>

<p>The “<strong>connectRequests</strong>” and “<strong>disconnectRequests</strong>” allows to convert MQTT messages to corresponding events that will be delivered to Thingsboard through the Gateway.
For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">...</span><span class="w">
      </span><span class="nt">"connectRequests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"topicFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensors/connect"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"deviceNameJsonExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${$.serialNumber}"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"topicFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensor/+/connect"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"deviceNameTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(?&lt;=sensor\/)(.*?)(?=\/connect)"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The <strong>topicFilter</strong> accepts wildcards (‘+’ and ‘#’). The device name may be extracted from the topic using <strong>deviceNameTopicExpression</strong> or from the incoming json message using <strong>deviceNameJsonExpression</strong>.</p>

<p>In this case following messages are valid:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>mosquitto_pub -h YOUR_MQTT_BROKER_HOST -p YOUR_MQTT_BROKER_PORT -t <span class="s2">"sensors/connect"</span> -m <span class="s1">'{"serialNumber":"SN-001"}'</span>
mosquitto_pub -h YOUR_MQTT_BROKER_HOST -p YOUR_MQTT_BROKER_PORT -t <span class="s2">"sensor/SN-001/connect"</span> -m <span class="s1">''</span>
</code></pre>
</div>

<p><strong>Note</strong>: The “<strong>connectRequests</strong>” and “<strong>disconnectRequests</strong>” configuration structure and syntax is the same.</p>

<h5 id="device-attributes-requests">Device attributes requests</h5>

<p>Thingsboard allows to provision device attributes and fetch some of them from the device application. 
You can treat this as a remote configuration for devices. Your devices are able to request client-side and shared attributes from Thingsboard. 
See <a href="/docs/user-guide/attributes/">user guide</a> for more details.</p>

<p>The “<strong>attributeRequests</strong>” configuration allows to configure format of corresponding attribute request and response messages.</p>

<p>For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">...</span><span class="w">
      </span><span class="nt">"attributeRequests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"topicFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensors/attributes"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"deviceNameJsonExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${$.serialNumber}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"attributeKeyJsonExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${$.key}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"requestIdJsonExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${$.requestId}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"clientScope"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"responseTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensors/${deviceName}/attributes/${responseId}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"valueExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"${attributeKey}\":\"${attributeValue}\"}"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"topicFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensors/+/attributes/+/request/+"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"deviceNameTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(?&lt;=sensors\/)(.*?)(?=\/attributes)"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"attributeKeyTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(?&lt;=attributes\/)(.*?)(?=\/request)"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"requestIdTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(?&lt;=request\/)(.*?)($)"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"clientScope"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"responseTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensors/${deviceName}/attributes/${attributeKey}/response/${requestId}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"valueExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${attributeValue}"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Corresponding configuration properties and their description is listed in the table below.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Mandatory</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>topicFilter</td>
      <td><strong>Topic</strong> filter that accepts wildcards (‘+’ and ‘#’)</td>
      <td>yes</td>
      <td>sensors/+/attributes/+/request/+</td>
    </tr>
    <tr>
      <td>deviceNameJsonExpression</td>
      <td><a href="https://github.com/jayway/JsonPath">JsonPath</a> expression to extract <strong>device name</strong> from message JSON</td>
      <td>Either <strong>deviceNameJsonExpression</strong> or <strong>deviceNameTopicExpression</strong> is required</td>
      <td>${$.serialNumber}</td>
    </tr>
    <tr>
      <td>attributeKeyJsonExpression</td>
      <td><a href="https://github.com/jayway/JsonPath">JsonPath</a> expression to extract <strong>attribute key</strong> from message JSON</td>
      <td>Either <strong>attributeKeyJsonExpression</strong> or <strong>attributeKeyTopicExpression</strong> is required</td>
      <td>${$.key}</td>
    </tr>
    <tr>
      <td>requestIdJsonExpression</td>
      <td><a href="https://github.com/jayway/JsonPath">JsonPath</a> expression to extract <strong>request id</strong> from message JSON</td>
      <td>Either <strong>requestIdJsonExpression</strong> or <strong>requestIdTopicExpression</strong> is required</td>
      <td>${$.requestId}</td>
    </tr>
    <tr>
      <td>deviceNameTopicExpression</td>
      <td>Regular expression to extract <strong>device name</strong> from topic</td>
      <td>Either <strong>deviceNameTopicExpression</strong> or <strong>deviceNameJsonExpression</strong> is required</td>
      <td>(?&lt;=sensors\/)(.*?)(?=\/attributes)</td>
    </tr>
    <tr>
      <td>attributeKeyTopicExpression</td>
      <td>Regular expression to extract <strong>attribute key</strong> from topic</td>
      <td>Either <strong>attributeKeyTopicExpression</strong> or <strong>attributeKeyJsonExpression</strong> is required</td>
      <td>(?&lt;=attributes\/)(.*?)(?=\/request)</td>
    </tr>
    <tr>
      <td>requestIdTopicExpression</td>
      <td>Regular expression to extract <strong>request id</strong> from topic</td>
      <td>Either <strong>requestIdTopicExpression</strong> or <strong>requestIdJsonExpression</strong> is required</td>
      <td>(?&lt;=request\/)(.*?)($)</td>
    </tr>
    <tr>
      <td>clientScope</td>
      <td>Identifies scope of the attribute: client-side or shared</td>
      <td>yes</td>
      <td><strong>true</strong> for client-side attribute, <strong>false</strong> otherwise</td>
    </tr>
    <tr>
      <td>responseTopicExpression</td>
      <td>Expression for the topic where the response will be published. You can use <strong>${deviceName}</strong>,<strong>${requestId}</strong> and <strong>${attributeKey}</strong> in this expression.</td>
      <td>yes</td>
      <td>sensors/${deviceName}/attributes/${attributeKey}/response/${requestId}</td>
    </tr>
    <tr>
      <td>valueExpression</td>
      <td>Expression for the response message that will be published. You can use <strong>${deviceName}</strong>,<strong>${requestId}</strong> <strong>${attributeKey}</strong> and <strong>${attributeValue}</strong> in this expression.</td>
      <td>yes</td>
      <td>${attributeValue}</td>
    </tr>
  </tbody>
</table>

<p>In this case following messages are valid:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>mosquitto_pub -h YOUR_MQTT_BROKER_HOST -p YOUR_MQTT_BROKER_PORT -t <span class="s2">"sensors/attributes"</span> -m <span class="s1">'{"serialNumber":"SN-001", "key":"dataUploadFrequency", "requestId": 123}'</span>
mosquitto_pub -h YOUR_MQTT_BROKER_HOST -p YOUR_MQTT_BROKER_PORT -t <span class="s2">"sensors/SN-001/attributes/dataUploadFrequency/request/123"</span> -m <span class="s1">''</span>
</code></pre>
</div>

<h5 id="device-attribute-updates">Device attribute updates</h5>

<p>Thingsboard allows to subscribe to changes of shared device attributes from the device application. See <a href="/docs/user-guide/attributes/">user guide</a> for more details.</p>

<p>The “<strong>attributeUpdates</strong>” configuration allows to configure format of corresponding subscription messages.</p>

<p>For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">...</span><span class="w">
      </span><span class="nt">"attributeUpdates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"deviceNameFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"attributeFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"topicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensor/${deviceName}/${attributeKey}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"valueExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"${attributeKey}\":\"${attributeValue}\"}"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
<p>As you can see, you are able to filter out devices and attributes and forward this updates to certain topic.
The topic and value expressions support following parameters: <strong>${deviceName}</strong>,<strong>${requestId}</strong> <strong>${attributeKey}</strong> and <strong>${attributeValue}</strong>.</p>

<h5 id="server-side-rpc-commands">Server side RPC commands</h5>

<p>Thingsboard allows to send <a href="/docs/user-guide/rpc/">RPC commands</a> to the device that is connected to Thingsboard directly or via Gateway.</p>

<p>The “<strong>serverSideRpc</strong>” allows to configure format of request and response MQTT messages.
For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">...</span><span class="w">
      </span><span class="nt">"serverSideRpc"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"deviceNameFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"methodFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"requestTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensor/${deviceName}/request/${methodName}/${requestId}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"responseTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensor/${deviceName}/response/${methodName}/${requestId}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"responseTimeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"valueExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${params}"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"deviceNameFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"methodFilter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no-reply"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"requestTopicExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sensor/${deviceName}/request/${methodName}/${requestId}"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"valueExpression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${params}"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>As you can use <strong>deviceNameFilter</strong> and <strong>methodFilter</strong> to apply different mapping rules for different devices/methods.
Once Gateway receives RPC request from server to device, it will publish corresponding message based on <strong>requestTopicExpression</strong> and <strong>valueExpression</strong>.
In case you expect reply to the request from device, you should also specify <strong>responseTopicExpression</strong> and <strong>responseTimeout</strong>. 
The Gateway will subscribe to the “response” topic and wait for device reply until “timeout” is detected.</p>

<p>Example of device application written in javascript:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mqtt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mqtt'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">broker</span> <span class="o">=</span> <span class="s1">'mqtt://127.0.0.1:1883'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">device</span> <span class="o">=</span> <span class="s1">'SN-001'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">client</span>  <span class="o">=</span> <span class="nx">mqtt</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">broker</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Will topic to report that device is disconnected </span>
  <span class="na">will</span><span class="p">:</span> <span class="p">{</span><span class="na">topic</span><span class="p">:</span> <span class="s1">'sensor/'</span> <span class="o">+</span> <span class="nx">device</span> <span class="o">+</span> <span class="s1">'/disconnect'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">qos</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'connect'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'connected'</span><span class="p">);</span>
    <span class="c1">// Report that device is connected to the gateway</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'sensor/'</span> <span class="o">+</span> <span class="nx">device</span> <span class="o">+</span> <span class="s1">'/connect'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
    <span class="c1">// Subscribe to RPC requests topic</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'sensor/'</span> <span class="o">+</span> <span class="nx">device</span> <span class="o">+</span> <span class="s1">'/request/+/+'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">topic</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'request.topic: '</span> <span class="o">+</span> <span class="nx">topic</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'request.body: '</span> <span class="o">+</span> <span class="nx">message</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'response.topic: '</span> <span class="o">+</span> <span class="nx">topic</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'request'</span><span class="p">,</span><span class="s1">'response'</span><span class="p">));</span>
    <span class="c1">// Publish the response that will simply echo the request.</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">topic</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'request'</span><span class="p">,</span><span class="s1">'response'</span><span class="p">),</span> <span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>
</div>

<p>Example of RPC request (rpc-request.json) that need to be sent from the server:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello!"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Example of the POST command using CURL:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nv">SERVER_BASE_URL</span><span class="o">=</span>http://localhost:8080
<span class="gp">$ </span><span class="nv">JWT_TOKEN</span><span class="o">=</span>YOUR_TOKEN_HERE
<span class="gp">$ </span><span class="nv">DEVICE_ID</span><span class="o">=</span>YOUR_DEVICE_ID_HERE
<span class="gp">$ </span>curl -v -X POST -d @rpc-request.json <span class="nv">$SERVER_BASE_URL</span>/api/plugins/rpc/twoway/<span class="nv">$DEVICE_ID</span> <span class="se">\</span>
--header <span class="s2">"Content-Type:application/json"</span> <span class="se">\</span>
--header <span class="s2">"X-Authorization: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span>
</code></pre>
</div>

<h2 id="next-steps">Next steps</h2>

<p>Explore examples:</p>

<ul>
  <li><a href="/docs/iot-gateway/getting-started/#step-8-connect-to-external-mqtt-broker">Mosquitto connection example</a></li>
</ul>

<p>Explore guides related to main Thingsboard features:</p>

<ul>
  <li><a href="/docs/user-guide/visualization/">Data Visualization</a> - how to visualize collected data.</li>
  <li><a href="/docs/user-guide/attributes/">Device attributes</a> - how to use device attributes.</li>
  <li><a href="/docs/user-guide/telemetry/">Telemetry data collection</a> - how to collect telemetry data.</li>
  <li><a href="/docs/user-guide/rpc/">Using RPC capabilities</a> - how to send commands to/from devices.</li>
  <li><a href="/docs/user-guide/rule-engine/">Rule Engine</a> - how to use rule engine to analyze data from devices.</li>
</ul>

  </div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/getting-started-guides/helloworld/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="/iot-use-cases/">Use cases</a>
			<a href="https://blog.thingsboard.io/">Blog</a>
			<a href="/docs/services/">Services</a>
			<a href="/docs/contact-us/">Contact us</a>
		</nav>
		<div class="newsletterSubsContainer">
			<form id="newsletter-form" method="post" onsubmit="return validateNewsletterForm(this)">
				<fieldset>
					<div class="newsletterInputs">
						<p class="subsTitle">Sign up for Thingsboard IoT newsletter</p>
						<input id="subsEmail" placeholder="Email" class="text-input" name="email" type="text" size="20" maxlength="80">
						<input type="hidden" name="_next" value="/docs/newsletter-thanks/" />
						<input type="text" name="_gotcha" style="display:none" />
						<input class="button" value="Submit" type="submit">
					</div>
				</fieldset>
			</form>
		</div>
		<div class="center">
			<div class="social">
				<div>
					<a href="https://twitter.com/thingsboard" class="twitter"><span>twitter</span></a>
					<a href="https://github.com/thingsboard/thingsboard" class="github"><span>Github</span></a>
					<a href="https://gitter.im/thingsboard/chat" class="gitter"><span>Gitter</span></a>
					<a href="http://stackoverflow.com/questions/tagged/thingsboard" class="stack-overflow"><span>Stack Overflow</span></a>
				</div>
				<div>
					<a href="https://groups.google.com/forum/#!forum/thingsboard" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://www.youtube.com/channel/UCDb9fsV-YR4JmnipAMGsVAQ" class="youtube"><span>YouTube Channel</span></a>
					<a href="https://www.facebook.com/thingsboard" class="facebook"><span>Facebook Page</span></a>
				</div>
			</div>
		</div>
		<div id="miceType" class="center">&copy; 2017 The Thingsboard Authors</div>
	</main>

	<script type="text/javascript">

		function validateNewsletterForm(form) {
			var email = $('input[name=email]', form).val();

			if (!validateValue('Email Address', email)) {
				return false;
			}

			var emailExp = /^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
			if(email.match(emailExp)==null) {
				window.alert("Entered Email Address is not valid.");
				return false;
			}
			return true;
		}

		function validateValue(name, val) {
			if (isEmpty(val)) {
				window.alert("Please fill '" + name + "' field.");
				return false;
			}
			return true;
		}

		function isEmpty(val) {
			return val === undefined || val.trim().length == 0;
		}

	</script>

	<script type="text/javascript">

		var newsletterform =  document.getElementById('newsletter-form');
		newsletterform.setAttribute('action', 'https://formspree.io/' + 'newsletter' + '@' + 'thingsboard' + '.' + 'io');

	</script>

</footer>



<button class="flyout-button" onclick="tb.toggleToc()"></button>


<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
</body>
</html>
